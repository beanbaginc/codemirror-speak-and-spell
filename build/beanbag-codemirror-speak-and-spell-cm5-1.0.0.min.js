!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("codemirror")):"function"==typeof define&&define.amd?define(["codemirror"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).CodeMirror)}(this,function(e){"use strict";function n(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach(function(t){if("default"!==t){var l=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,l.get?l:{enumerable:!0,get:function(){return e[t]}})}}),n.default=e,Object.freeze(n)}var t=n(e);function l(e){const n=(e.nodeType===Node.ELEMENT_NODE?e:e.parentElement).closest(".CodeMirror-line");let t=0;const l=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT);for(;l.nextNode();){const n=l.currentNode;if(n===e)break;n.nodeType===Node.TEXT_NODE&&(t+=n.data.length)}return t}function r(e,n){const t=e.inputEl,r=n.startContainer,o=n.endContainer,i=r.nodeType===Node.ELEMENT_NODE?r:r.parentElement,u=o.nodeType===Node.ELEMENT_NODE?o:o.parentElement;let a=null,d=null,f=null,c=null,s=null,p=null,E=null,T=null;if(i===t?a=n.startOffset:(E=i.closest(".CodeMirror-line"),f=l(r),c=n.startOffset),u===t?d=n.endOffset:(T=n.endContainer===n.startContainer&&null!==E?E:u.closest(".CodeMirror-line"),s=i===u&&null!==f?f:l(o),p=n.endOffset),null===a||null===d){const e=t.children;for(let n=0;n<e.length&&(null===a||null===d);n++){const t=e[n];null===a&&t===E&&(a=n),null===d&&t===T&&(d=n)}}return[{ch:(f||0)+(c||0),line:a},{ch:(s||0)+(p||0),line:d}]}function o(e,n){var t;if("insertReplacementText"!==n.inputType&&"insertText"!==n.inputType)return;const l=n.getTargetRanges();if(!l||0===l.length)return;const o=n.data??(null===(t=n.dataTransfer)||void 0===t?void 0:t.getData("text"))??null;if(null===o)return;n.preventDefault(),n.stopPropagation();const i=e.cm;for(const n of l){const[t,l]=r(e,n);i.replaceRange(o,t,l,"+input")}}t.defineOption("speakAndSpell",!1,function(e,n,l){l&&l!==t.Init&&function(e){const n=e._speakAndSpellState||null;n&&(n.inputEl.removeEventListener("beforeinput",n.beforeInputHandler),e._speakAndSpellState=null)}(e),n&&function(e,n){const t=e.display.input.div,l=e=>n(r,e);t.addEventListener("beforeinput",l);const r={cm:e,inputEl:t,beforeInputHandler:l};e._speakAndSpellState=r}(e,o)})});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmVhbmJhZy1jb2RlbWlycm9yLXNwZWFrLWFuZC1zcGVsbC1jbTUtMS4wLjAubWluLmpzIiwic291cmNlcyI6WyIuLi9zcmMvY201L2NtVXRpbHMudHMiLCIuLi9zcmMvY201L2V2ZW50cy50cyIsIi4uL3NyYy9jbTUvaW5kZXgudHMiLCIuLi9zcmMvY201L3N0YXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29kZU1pcnJvciB1dGlsaXR5IGZ1bmN0aW9ucy5cbiAqXG4gKiBWZXJzaW9uIEFkZGVkOlxuICogICAgIDEuMFxuICovXG5cbmltcG9ydCB7IHR5cGUgUG9zaXRpb24gfSBmcm9tICdjb2RlbWlycm9yJztcbmltcG9ydCB7IHR5cGUgU3BlYWtBbmRTcGVsbFN0YXRlIH0gZnJvbSAnLi9zdGF0ZSc7XG5cblxuLyoqXG4gKiBGaW5kIHRoZSBjaGFyYWN0ZXIgb2Zmc2V0IHdpdGhpbiBhIGxpbmUgdG8gdGhlIHN0YXJ0IG9mIGEgbm9kZS5cbiAqXG4gKiBUaGlzIHdhbGtzIGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBDb2RlTWlyb3IgbGluZSBlbGVtZW50IHRvIHRoZSBwcm92aWRlZFxuICogbm9kZSwgY291bnRpbmcgdGhlIG51bWJlciBvZiBjaGFyYWN0ZXJzIGJlZm9yZSB0aGUgbm9kZS5cbiAqXG4gKiBUaGUgbm9kZSBtYXkgYmUgYSB0ZXh0IG5vZGUgb3IgYW4gZWxlbWVudC4gSXQgbXVzdCBsaXZlIHdpdGhpbiBhXG4gKiBgYC5Db2RlTWlycm9yLWxpbmVgYCBlbGVtZW50LCBidXQgZG9lcyBub3QgbmVlZCB0byBiZSBhbiBpbW1lZGlhdGVcbiAqIGRlc2NlbmRhbnQuXG4gKlxuICogVmVyc2lvbiBBZGRlZDpcbiAqICAgICAxLjBcbiAqXG4gKiBBcmdzOlxuICogICAgIHRhcmdldE5vZGUgKE5vZGUpOlxuICogICAgICAgICBUaGUgdGFyZ2V0IG5vZGUgd2l0aGluIGEgbGluZS5cbiAqXG4gKiBSZXR1cm5zOlxuICogICAgIG51bWJlcjpcbiAqICAgICBUaGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgcHJlY2VkaW5nIHRoZSBub2RlLlxuICovXG5mdW5jdGlvbiBfZmluZENoYXJPZmZzZXRGb3JOb2RlKFxuICAgIHRhcmdldE5vZGU6IE5vZGUsXG4pOiBudW1iZXIge1xuICAgIGNvbnN0IHRhcmdldEVsID0gKHRhcmdldE5vZGUubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKVxuICAgICAgICAgICAgICAgICAgICAgID8gdGFyZ2V0Tm9kZSBhcyBIVE1MRWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgIDogdGFyZ2V0Tm9kZS5wYXJlbnRFbGVtZW50O1xuICAgIGNvbnN0IHN0YXJ0RWwgPSB0YXJnZXRFbC5jbG9zZXN0KCcuQ29kZU1pcnJvci1saW5lJyk7XG4gICAgbGV0IG9mZnNldCA9IDA7XG5cbiAgICBjb25zdCB0cmVlV2Fsa2VyID0gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcihcbiAgICAgICAgc3RhcnRFbCxcbiAgICAgICAgTm9kZUZpbHRlci5TSE9XX0VMRU1FTlQgfCBOb2RlRmlsdGVyLlNIT1dfVEVYVCxcbiAgICApO1xuXG4gICAgd2hpbGUgKHRyZWVXYWxrZXIubmV4dE5vZGUoKSkge1xuICAgICAgICBjb25zdCBub2RlID0gdHJlZVdhbGtlci5jdXJyZW50Tm9kZTtcblxuICAgICAgICBpZiAobm9kZSA9PT0gdGFyZ2V0Tm9kZSkge1xuICAgICAgICAgICAgLyogV2UgcmVhY2hlZCB0aGUgbm9kZS4gV2UncmUgZG9uZS4gKi9cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFKSB7XG4gICAgICAgICAgICBvZmZzZXQgKz0gKG5vZGUgYXMgVGV4dCkuZGF0YS5sZW5ndGg7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb2Zmc2V0O1xufVxuXG5cbi8qKlxuICogRmluZCB0aGUgbGluZSBhbmQgY2hhcmFjdGVyIG9mZnNldHMgZm9yIGJvdGggZW5kcyBvZiBhIHJhbmdlLlxuICpcbiAqIFZlcnNpb24gQWRkZWQ6XG4gKiAgICAgMS4wXG4gKlxuICogQXJnczpcbiAqICAgICBzdGF0ZSAoU3BlYWtBbmRTcGVsbFN0YXRlKTpcbiAqICAgICAgICAgVGhlIGN1cnJlbnQgcGx1Z2luIHN0YXRlLlxuICpcbiAqICAgICByYW5nZSAoU3RhdGljUmFuZ2UpOlxuICogICAgICAgICBUaGUgcmFuZ2UgdG8gY2hlY2suXG4gKlxuICogUmV0dXJuczpcbiAqICAgICBudW1iZXJbXTpcbiAqICAgICBBIDItdHVwbGUgb2Y6XG4gKlxuICogICAgIFR1cGxlOlxuICogICAgICAgICAwIChDb2RlTWlycm9yLlBvc2l0aW9uKTpcbiAqICAgICAgICAgICAgIFRoZSBvZmZzZXRzIGF0IHRoZSBzdGFydCBvZiB0aGUgcmFuZ2UuXG4gKlxuICogICAgICAgICAxIChDb2RlTWlycm9yLlBvc2l0aW9uKTpcbiAqICAgICAgICAgICAgIFRoZSBvZmZzZXRzIGF0IHRoZSBlbmQgb2YgdGhlIHJhbmdlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZE9mZnNldHNGb3JSYW5nZShcbiAgICBzdGF0ZTogU3BlYWtBbmRTcGVsbFN0YXRlLFxuICAgIHJhbmdlOiBTdGF0aWNSYW5nZSxcbik6IFtQb3NpdGlvbiwgUG9zaXRpb25dIHtcbiAgICBjb25zdCBpbnB1dEVsID0gc3RhdGUuaW5wdXRFbDtcblxuICAgIC8qXG4gICAgICogRmlyc3QsIHB1bGwgb3V0IHRoZSBub2RlcyBhbmQgdGhlIG5lYXJlc3QgZWxlbWVudHMgZnJvbSB0aGUgcmFuZ2VzLlxuICAgICAqXG4gICAgICogVGhlIG5vZGVzIG1heSBiZSB0ZXh0IG5vZGVzLCBpbiB3aGljaCBjYXNlIHdlJ2xsIG5lZWQgdGhlaXIgcGFyZW50XG4gICAgICogZm9yIGRvY3VtZW50IHRyYXZlcnNhbC5cbiAgICAgKi9cbiAgICBjb25zdCBzdGFydE5vZGUgPSByYW5nZS5zdGFydENvbnRhaW5lcjtcbiAgICBjb25zdCBlbmROb2RlID0gcmFuZ2UuZW5kQ29udGFpbmVyO1xuXG4gICAgY29uc3Qgc3RhcnRFbCA9IChcbiAgICAgICAgKHN0YXJ0Tm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUpXG4gICAgICAgID8gc3RhcnROb2RlIGFzIEhUTUxFbGVtZW50XG4gICAgICAgIDogc3RhcnROb2RlLnBhcmVudEVsZW1lbnQpO1xuICAgIGNvbnN0IGVuZEVsID0gKFxuICAgICAgICAoZW5kTm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUpXG4gICAgICAgID8gZW5kTm9kZSBhcyBIVE1MRWxlbWVudFxuICAgICAgICA6IGVuZE5vZGUucGFyZW50RWxlbWVudCk7XG5cbiAgICAvKlxuICAgICAqIEJlZ2luIHRyYWNraW5nIHRoZSBzdGF0ZSB3ZSdsbCB3YW50IHRvIHJldHVybiBvciB1c2UgaW4gZnV0dXJlXG4gICAgICogY29tcHV0YXRpb25zLlxuICAgICAqXG4gICAgICogSW4gdGhlIG9wdGltYWwgY2FzZSwgd2UnbGwgYmUgY2FsY3VsYXRpbmcgc29tZSBvZiB0aGlzIG9ubHkgb25jZVxuICAgICAqIGFuZCB0aGVuIHJldXNpbmcgaXQuXG4gICAgICovXG4gICAgbGV0IHN0YXJ0TGluZU51bSA9IG51bGw7XG4gICAgbGV0IGVuZExpbmVOdW0gPSBudWxsO1xuICAgIGxldCBzdGFydE9mZnNldEJhc2UgPSBudWxsO1xuICAgIGxldCBzdGFydE9mZnNldEV4dHJhID0gbnVsbDtcbiAgICBsZXQgZW5kT2Zmc2V0QmFzZSA9IG51bGw7XG4gICAgbGV0IGVuZE9mZnNldEV4dHJhID0gbnVsbDtcblxuICAgIGxldCBzdGFydENNTGluZUVsOiBIVE1MRWxlbWVudCA9IG51bGw7XG4gICAgbGV0IGVuZENNTGluZUVsOiBIVE1MRWxlbWVudCA9IG51bGw7XG5cbiAgICAvKlxuICAgICAqIEZvciBib3RoIGVuZHMgb2YgdGhlIHJhbmdlLCB3ZSdsbCBuZWVkIHRvIGZpcnN0IHNlZSBpZiB3ZSdyZSBhdCB0aGVcbiAgICAgKiB0b3AgaW5wdXQgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIHNvLCByYW5nZSBvZmZzZXRzIHdpbGwgYmUgbGluZS1iYXNlZCByYXRoZXIgdGhhbiBjaGFyYWN0ZXItYmFzZWQuXG4gICAgICpcbiAgICAgKiBPdGhlcndpc2UsIHdlJ2xsIG5lZWQgdG8gZmluZCB0aGUgbmVhcmVzdCBsaW5lIGFuZCBjb3VudCBjaGFyYWN0ZXJzXG4gICAgICogdW50aWwgd2UgcmVhY2ggb3VyIG5vZGUuXG4gICAgICovXG4gICAgaWYgKHN0YXJ0RWwgPT09IGlucHV0RWwpIHtcbiAgICAgICAgc3RhcnRMaW5lTnVtID0gcmFuZ2Uuc3RhcnRPZmZzZXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc3RhcnRDTUxpbmVFbCA9IHN0YXJ0RWwuY2xvc2VzdCgnLkNvZGVNaXJyb3ItbGluZScpO1xuICAgICAgICBzdGFydE9mZnNldEJhc2UgPSBfZmluZENoYXJPZmZzZXRGb3JOb2RlKHN0YXJ0Tm9kZSk7XG4gICAgICAgIHN0YXJ0T2Zmc2V0RXh0cmEgPSByYW5nZS5zdGFydE9mZnNldDtcbiAgICB9XG5cbiAgICBpZiAoZW5kRWwgPT09IGlucHV0RWwpIHtcbiAgICAgICAgZW5kTGluZU51bSA9IHJhbmdlLmVuZE9mZnNldDtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvKlxuICAgICAgICAgKiBJZiB3ZSBjYW4gcmV1c2UgdGhlIHJlc3VsdHMgZnJvbSBjYWxjdWxhdGlvbnMgYWJvdmUsIHRoYXQnbGwgc2F2ZVxuICAgICAgICAgKiB1cyBzb21lIERPTSB0cmF2ZXJzYWwgb3BlcmF0aW9ucy4gT3RoZXJ3aXNlLCBmYWxsIGJhY2sgdG8gZG9pbmcgdGhlXG4gICAgICAgICAqIHNhbWUgbG9naWMgd2UgZGlkIGFib3ZlLlxuICAgICAgICAgKi9cbiAgICAgICAgZW5kQ01MaW5lRWwgPVxuICAgICAgICAgICAgKHJhbmdlLmVuZENvbnRhaW5lciA9PT0gcmFuZ2Uuc3RhcnRDb250YWluZXIgJiZcbiAgICAgICAgICAgICBzdGFydENNTGluZUVsICE9PSBudWxsKVxuICAgICAgICAgICAgPyBzdGFydENNTGluZUVsXG4gICAgICAgICAgICA6IGVuZEVsLmNsb3Nlc3QoJy5Db2RlTWlycm9yLWxpbmUnKTtcblxuICAgICAgICBlbmRPZmZzZXRCYXNlID1cbiAgICAgICAgICAgIChzdGFydEVsID09PSBlbmRFbCAmJiBzdGFydE9mZnNldEJhc2UgIT09IG51bGwpXG4gICAgICAgICAgICA/IHN0YXJ0T2Zmc2V0QmFzZVxuICAgICAgICAgICAgOiBfZmluZENoYXJPZmZzZXRGb3JOb2RlKGVuZE5vZGUpO1xuICAgICAgICBlbmRPZmZzZXRFeHRyYSA9IHJhbmdlLmVuZE9mZnNldDtcbiAgICB9XG5cbiAgICBpZiAoc3RhcnRMaW5lTnVtID09PSBudWxsIHx8IGVuZExpbmVOdW0gPT09IG51bGwpIHtcbiAgICAgICAgLypcbiAgICAgICAgICogV2UgbmVlZCB0byBmaW5kIHRoZSBsaW5lIG51bWJlcnMgdGhhdCBjb3JyZXNwb25kIHRvIGVpdGhlciBtaXNzaW5nXG4gICAgICAgICAqIGVuZCBvZiBvdXIgcmFuZ2UuIFRvIGRvIHRoaXMsIHdlIGhhdmUgdG8gd2FsayB0aGUgbGluZXMgdW50aWwgd2VcbiAgICAgICAgICogZmluZCBib3RoIG91ciBtaXNzaW5nIGxpbmUgbnVtYmVycy5cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gaW5wdXRFbC5jaGlsZHJlbjtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDtcbiAgICAgICAgICAgICAoaSA8IGNoaWxkcmVuLmxlbmd0aCAmJlxuICAgICAgICAgICAgICAoc3RhcnRMaW5lTnVtID09PSBudWxsIHx8IGVuZExpbmVOdW0gPT09IG51bGwpKTtcbiAgICAgICAgICAgICBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07XG5cbiAgICAgICAgICAgIGlmIChzdGFydExpbmVOdW0gPT09IG51bGwgJiYgY2hpbGQgPT09IHN0YXJ0Q01MaW5lRWwpIHtcbiAgICAgICAgICAgICAgICBzdGFydExpbmVOdW0gPSBpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZW5kTGluZU51bSA9PT0gbnVsbCAmJiBjaGlsZCA9PT0gZW5kQ01MaW5lRWwpIHtcbiAgICAgICAgICAgICAgICBlbmRMaW5lTnVtID0gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qXG4gICAgICogUmV0dXJuIG91ciByZXN1bHRzLlxuICAgICAqXG4gICAgICogV2UgbWF5IG5vdCBoYXZlIHNldCBzb21lIG9mIHRoZSBvZmZzZXRzIGFib3ZlLCBkZXBlbmRpbmcgb24gd2hldGhlclxuICAgICAqIHdlIHdlcmUgd29ya2luZyBvZmYgb2YgdGhlIENvZGVNaXJyb3IgaW5wdXQgZWxlbWVudCwgYSB0ZXh0IG5vZGUsIG9yXG4gICAgICogYW5vdGhlciBwYXJlbnQgZWxlbWVudC4gQW5kIHdlIGRpZG4ndCB3YW50IHRvIHNldCB0aGVtIGFueSBlYXJsaWVyLFxuICAgICAqIGJlY2F1c2Ugd2Ugd2VyZSBjaGVja2luZyB0byBzZWUgd2hhdCB3ZSBjb21wdXRlZCBhbmQgd2hhdCB3ZSBjb3VsZFxuICAgICAqIHJldXNlLlxuICAgICAqXG4gICAgICogQXQgdGhpcyBwb2ludCwgYW55dGhpbmcgd2UgZGlkbid0IGNhbGN1bGF0ZSBzaG91bGQgYmUgMC5cbiAgICAgKi9cbiAgICByZXR1cm4gW1xuICAgICAgICB7XG4gICAgICAgICAgICBjaDogKHN0YXJ0T2Zmc2V0QmFzZSB8fCAwKSArIChzdGFydE9mZnNldEV4dHJhIHx8IDApLFxuICAgICAgICAgICAgbGluZTogc3RhcnRMaW5lTnVtLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBjaDogKGVuZE9mZnNldEJhc2UgfHwgMCkgKyAoZW5kT2Zmc2V0RXh0cmEgfHwgMCksXG4gICAgICAgICAgICBsaW5lOiBlbmRMaW5lTnVtLFxuICAgICAgICB9LFxuICAgIF07XG59XG4iLCIvKipcbiAqIEV2ZW50IGhhbmRsaW5nIGZvciB0aGUgcGx1Z2luLlxuICpcbiAqIFZlcnNpb24gQWRkZWQ6XG4gKiAgICAgMS4wXG4gKi9cblxuaW1wb3J0IHR5cGUgKiBhcyBDb2RlTWlycm9yIGZyb20gJ2NvZGVtaXJyb3InO1xuXG5pbXBvcnQgeyBmaW5kT2Zmc2V0c0ZvclJhbmdlIH0gZnJvbSAnLi9jbVV0aWxzJztcbmltcG9ydCB7IHR5cGUgU3BlYWtBbmRTcGVsbFN0YXRlIH0gZnJvbSAnLi9zdGF0ZSc7XG5cblxuLyoqXG4gKiBIYW5kbGUgYmVmb3JlaW5wdXQgZXZlbnRzIG9uIHRoZSBDb2RlTWlycm9yIGlucHV0IGVsZW1lbnQuXG4gKlxuICogVGhpcyB3aWxsIGxpc3RlbiBmb3IgZXZlbnRzIHRoYXQgY29ycmVzcG9uZCB0byB0ZXh0IGluc2VydHMgb3JcbiAqIHJlcGxhY2VtZW50cywgd2hpY2ggd291bGQgYmUgc2VudCBieSBzcGVsbCBjaGVja2luZyBjb3JyZWN0aW9ucyxcbiAqIHNwZWVjaC10by10ZXh0LCBvciBvdGhlciBmb3JtcyBvZiB0ZXh0IGdlbmVyYXRpb24gb3IgbWFuaXB1bGF0aW9uLlxuICpcbiAqIEJhc2VkIG9uIHRoZSBldmVudCwgdGhpcyBtYXkgY2FuY2VsIHRoZSBkZWZhdWx0IGJyb3dzZXIgYmVoYXZpb3IgYW5kXG4gKiBpbml0aWF0ZSB0aGUgb3BlcmF0aW9uIGRpcmVjdGx5IGluIENvZGVNaXJyb3IuXG4gKlxuICogVmVyc2lvbiBBZGRlZDpcbiAqICAgICAxLjBcbiAqXG4gKiBBcmdzOlxuICogICAgIHN0YXRlIChTcGVha0FuZFNwZWxsU3RhdGUpOlxuICogICAgICAgICBUaGUgY3VycmVudCBwbHVnaW4gc3RhdGUuXG4gKlxuICogICAgIGV2dCAoSW5wdXRFdmVudCk6XG4gKiAgICAgICAgIFRoZSBpbnB1dCBldmVudCB0byBwcm9jZXNzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gb25CZWZvcmVJbnB1dChcbiAgICBzdGF0ZTogU3BlYWtBbmRTcGVsbFN0YXRlLFxuICAgIGV2dDogSW5wdXRFdmVudCxcbikge1xuICAgIGlmIChldnQuaW5wdXRUeXBlICE9PSAnaW5zZXJ0UmVwbGFjZW1lbnRUZXh0JyAmJlxuICAgICAgICBldnQuaW5wdXRUeXBlICE9PSAnaW5zZXJ0VGV4dCcpIHtcbiAgICAgICAgLypcbiAgICAgICAgICogV2Ugb25seSB3YW50IHRvIGhhbmRsZSByZXBsYWNlbWVudHMgdG8gdGhlIHRleHQgb3IgbmV3XG4gICAgICAgICAqIGluc2VydHMuIElnbm9yZSB0aGlzLlxuICAgICAgICAgKi9cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8qXG4gICAgICogVGhpcyBtYXkgYmUgYSBzcGVsbCBjaGVja2luZyByZXBsYWNlbWVudCwgYXV0by1jb3JyZWN0IChpZiBpdCB3ZXJlXG4gICAgICogZW5hYmxlZCksIHdyaXRpbmcgc3VnZ2VzdGlvbiwgb3Igc2ltaWxhci5cbiAgICAgKlxuICAgICAqIElmIHdlIGhhdmUgdGhlIHN0YXRlIHdlIGV4cGVjdCwgd2UnbGwgc2tpcCB0aGUgYnJvd3NlcidzIGRlZmF1bHRcbiAgICAgKiBiZWhhdmlvciBhbmQgdXNlIENvZGVNaXJyb3IgdG8gcmVwbGFjZSB0aGUgc3RyaW5nLCBzbyBpdCBkb2Vzbid0XG4gICAgICogaGF2ZSB0byBmaWdodCB0aGUgRE9NLlxuICAgICAqXG4gICAgICogRmlyc3QsIGdyYWIgdGhlIHJhbmdlcyBmcm9tIHRoZSBldmVudC4gVGhpcyBtaWdodCBiZSBlbXB0eSwgd2hpY2hcbiAgICAgKiB3b3VsZCBoYXZlIGJlZW4gdGhlIGNhc2Ugb24gc29tZSB2ZXJzaW9ucyBvZiBDaHJvbWUgSSB0ZXN0ZWQgd2l0aFxuICAgICAqIGJlZm9yZS4gIFBsYXkgaXQgc2FmZSwgYmFpbCBpZiB3ZSBjYW4ndCBmaW5kIGEgcmFuZ2UuXG4gICAgICpcbiAgICAgKiBFYWNoIHJhbmdlIHdpbGwgaGF2ZSBhbiBvZmZzZXQgaW4gYSBzdGFydCBjb250YWluZXIgYW5kIGFuIG9mZnNldFxuICAgICAqIGluIGFuIGVuZCBjb250YWluZXIuIFRoZXNlIGNvbnRhaW5lcnMgbWF5IGJlIHRleHQgbm9kZXMgb3Igc29tZVxuICAgICAqIHBhcmVudCBub2RlICh1cCB0byBhbmQgaW5jbHVkaW5nIHRoZSBjb250ZW50ZWRpdGFibGUgbm9kZSkuXG4gICAgICovXG4gICAgY29uc3QgcmFuZ2VzID0gZXZ0LmdldFRhcmdldFJhbmdlcygpO1xuXG4gICAgaWYgKCFyYW5nZXMgfHwgcmFuZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvKiBXZSBnb3QgZW1wdHkgcmFuZ2VzLiBUaGVyZSdzIG5vdGhpbmcgdG8gZG8uICovXG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBuZXdUZXh0ID0gZXZ0LmRhdGEgPz8gZXZ0LmRhdGFUcmFuc2Zlcj8uZ2V0RGF0YSgndGV4dCcpID8/IG51bGw7XG5cbiAgICBpZiAobmV3VGV4dCA9PT0gbnVsbCkge1xuICAgICAgICAvKiBXZSBjb3VsZG4ndCByZXRyaWV2ZSB0aGUgdGV4dC4gVGhlcmUncyBub3RoaW5nIHRvIGRvLiAqL1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBXZSdsbCB0YWtlIG92ZXIgZnJvbSBoZXJlLiBXZSBkb24ndCB3YW50IHRoZSBicm93c2VyIG1lc3Npbmcgd2l0aFxuICAgICAqIGFueSBzdGF0ZSBhbmQgaW1wYWN0aW5nIENvZGVNaXJyb3IuIEluc3RlYWQsIHdlJ2xsIHJ1biB0aGVcbiAgICAgKiBvcGVyYXRpb25zIHRocm91Z2ggQ29kZU1pcnJvci5cbiAgICAgKi9cbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICBjb25zdCBjbSA9IHN0YXRlLmNtO1xuXG4gICAgZm9yIChjb25zdCByYW5nZSBvZiByYW5nZXMpIHtcbiAgICAgICAgY29uc3QgW3N0YXJ0T2Zmc2V0LCBlbmRPZmZzZXRdID0gZmluZE9mZnNldHNGb3JSYW5nZShzdGF0ZSwgcmFuZ2UpO1xuXG4gICAgICAgIGNtLnJlcGxhY2VSYW5nZShuZXdUZXh0LCBzdGFydE9mZnNldCwgZW5kT2Zmc2V0LCAnK2lucHV0Jyk7XG4gICAgfVxufVxuIiwiLyoqXG4gKiBNYWluIHNldHVwIGZvciB0aGUgU3BlYWstYW5kLVNwZWxsIHBsdWdpbi5cbiAqXG4gKiBWZXJzaW9uIEFkZGVkOlxuICogICAgIDEuMFxuICovXG5cbmltcG9ydCAqIGFzIENvZGVNaXJyb3IgZnJvbSAnY29kZW1pcnJvcic7XG5cbmltcG9ydCB7IG9uQmVmb3JlSW5wdXQgfSBmcm9tICcuL2V2ZW50cyc7XG5pbXBvcnQge1xuICAgIGNsZWFyU3BlYWtBbmRTcGVsbFN0YXRlLFxuICAgIHNldHVwU3BlYWtBbmRTcGVsbFN0YXRlLFxufSBmcm9tICcuL3N0YXRlJztcblxuXG4vKlxuICogUmVnaXN0ZXIgdGhlIHBsdWdpbi4gSXQnbGwgYWN0aXZhdGUgd2hlbiB1c2luZyBgYHNwZWFrQW5kU3BlbGw6IHRydWVgYC5cbiAqL1xuQ29kZU1pcnJvci5kZWZpbmVPcHRpb24oJ3NwZWFrQW5kU3BlbGwnLCBmYWxzZSwgZnVuY3Rpb24oXG4gICAgY206IENvZGVNaXJyb3IuRWRpdG9yLFxuICAgIGVuYWJsZWQ6IGJvb2xlYW4sXG4gICAgb2xkRW5hYmxlZDogYm9vbGVhbixcbikge1xuICAgIGlmIChvbGRFbmFibGVkICYmIG9sZEVuYWJsZWQgIT09IChDb2RlTWlycm9yIGFzIGFueSkuSW5pdCkge1xuICAgICAgICBjbGVhclNwZWFrQW5kU3BlbGxTdGF0ZShjbSk7XG4gICAgfVxuXG4gICAgaWYgKGVuYWJsZWQpIHtcbiAgICAgICAgc2V0dXBTcGVha0FuZFNwZWxsU3RhdGUoY20sIG9uQmVmb3JlSW5wdXQpO1xuICAgIH1cbn0pO1xuIiwiLyoqXG4gKiBTdGF0ZSBtYW5hZ2VtZW50IGZvciB0aGUgU3BlYWstYW5kLVNwZWxsIHBsdWdpbi5cbiAqXG4gKiBWZXJzaW9uIEFkZGVkOlxuICogICAgIDEuMFxuICovXG5cbmltcG9ydCB0eXBlICogYXMgQ29kZU1pcnJvciBmcm9tICdjb2RlbWlycm9yJztcblxuXG4vKipcbiAqIFN0YXRlIGZvciB0aGUgcGx1Z2luLlxuICpcbiAqIFZlcnNpb24gQWRkZWQ6XG4gKiAgICAgMS4wXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3BlYWtBbmRTcGVsbFN0YXRlIHtcbiAgICAvKiogVGhlIENvZGVNaXJyb3IgZWxlbWVudC4gKi9cbiAgICBjbTogQ29kZU1pcnJvci5FZGl0b3I7XG5cbiAgICAvKiogVGhlIENvZGVNaXJyb3IgaW5wdXQgZWxlbWVudC4gKi9cbiAgICBpbnB1dEVsOiBIVE1MRWxlbWVudDtcblxuICAgIC8qKiBUaGUgYmVmb3JlaW5wdXQgaGFuZGxlciBvbiB0aGUgaW5wdXQgZWxlbWVudC4gKi9cbiAgICBiZWZvcmVJbnB1dEhhbmRsZXI6IChldnQ6IElucHV0RXZlbnQpID0+IHZvaWQ7XG59XG5cblxuLyoqXG4gKiBTZXQgdXAgc3RhdGUgZm9yIHRoZSBwbHVnaW4uXG4gKlxuICogVmVyc2lvbiBBZGRlZDpcbiAqICAgICAxLjBcbiAqXG4gKiBBcmdzOlxuICogICAgIGNtIChDb2RlTWlycm9yLkVkaXRvcik6XG4gKiAgICAgICAgIFRoZSBDb2RlTWlycm9yIGluc3RhbmNlLlxuICpcbiAqICAgICBvbkJlZm9yZUlucHV0IChmdW5jdGlvbik6XG4gKiAgICAgICAgIFRoZSBmdW5jdGlvbiB0byBjYWxsIHdoZW4gYGBiZWZvcmVpbnB1dGBgIGlzIHRyaWdnZXJlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldHVwU3BlYWtBbmRTcGVsbFN0YXRlKFxuICAgIGNtOiBDb2RlTWlycm9yLkVkaXRvcixcbiAgICBvbkJlZm9yZUlucHV0OiAoU3BlYWtBbmRTcGVsbFN0YXRlLCBJbnB1dEV2ZW50KSA9PiB2b2lkLFxuKSB7XG4gICAgY29uc3QgaW5wdXRFbCA9IChjbSBhcyBhbnkpLmRpc3BsYXkuaW5wdXQuZGl2O1xuXG4gICAgY29uc3QgaGFuZGxlciA9IChldnQ6IElucHV0RXZlbnQpID0+IG9uQmVmb3JlSW5wdXQoc3RhdGUsIGV2dCk7XG4gICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmVpbnB1dCcsIGhhbmRsZXIpO1xuXG4gICAgY29uc3Qgc3RhdGU6IFNwZWFrQW5kU3BlbGxTdGF0ZSA9IHtcbiAgICAgICAgY206IGNtLFxuICAgICAgICBpbnB1dEVsOiBpbnB1dEVsLFxuICAgICAgICBiZWZvcmVJbnB1dEhhbmRsZXI6IGhhbmRsZXIsXG4gICAgfTtcbiAgICAoY20gYXMgYW55KS5fc3BlYWtBbmRTcGVsbFN0YXRlID0gc3RhdGU7XG59XG5cblxuLyoqXG4gKiBDbGVhciBzdGF0ZSBmb3IgdGhlIHBsdWdpbi5cbiAqXG4gKiBWZXJzaW9uIEFkZGVkOlxuICogICAgIDEuMFxuICpcbiAqIEFyZ3M6XG4gKiAgICAgY20gKENvZGVNaXJyb3IuRWRpdG9yKTpcbiAqICAgICAgICAgVGhlIENvZGVNaXJyb3IgaW5zdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhclNwZWFrQW5kU3BlbGxTdGF0ZShcbiAgICBjbTogQ29kZU1pcnJvci5FZGl0b3IsXG4pIHtcbiAgICBjb25zdCBzdGF0ZSA9IChjbSBhcyBhbnkpLl9zcGVha0FuZFNwZWxsU3RhdGUgfHwgbnVsbDtcblxuICAgIGlmIChzdGF0ZSkge1xuICAgICAgICBzdGF0ZS5pbnB1dEVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JlZm9yZWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmJlZm9yZUlucHV0SGFuZGxlcik7XG4gICAgICAgIChjbSBhcyBhbnkpLl9zcGVha0FuZFNwZWxsU3RhdGUgPSBudWxsO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJfZmluZENoYXJPZmZzZXRGb3JOb2RlIiwidGFyZ2V0Tm9kZSIsInN0YXJ0RWwiLCJub2RlVHlwZSIsIk5vZGUiLCJFTEVNRU5UX05PREUiLCJwYXJlbnRFbGVtZW50IiwiY2xvc2VzdCIsIm9mZnNldCIsInRyZWVXYWxrZXIiLCJkb2N1bWVudCIsImNyZWF0ZVRyZWVXYWxrZXIiLCJOb2RlRmlsdGVyIiwiU0hPV19FTEVNRU5UIiwiU0hPV19URVhUIiwibmV4dE5vZGUiLCJub2RlIiwiY3VycmVudE5vZGUiLCJURVhUX05PREUiLCJkYXRhIiwibGVuZ3RoIiwiZmluZE9mZnNldHNGb3JSYW5nZSIsInN0YXRlIiwicmFuZ2UiLCJpbnB1dEVsIiwic3RhcnROb2RlIiwic3RhcnRDb250YWluZXIiLCJlbmROb2RlIiwiZW5kQ29udGFpbmVyIiwiZW5kRWwiLCJzdGFydExpbmVOdW0iLCJlbmRMaW5lTnVtIiwic3RhcnRPZmZzZXRCYXNlIiwic3RhcnRPZmZzZXRFeHRyYSIsImVuZE9mZnNldEJhc2UiLCJlbmRPZmZzZXRFeHRyYSIsInN0YXJ0Q01MaW5lRWwiLCJlbmRDTUxpbmVFbCIsInN0YXJ0T2Zmc2V0IiwiZW5kT2Zmc2V0IiwiY2hpbGRyZW4iLCJpIiwiY2hpbGQiLCJjaCIsImxpbmUiLCJvbkJlZm9yZUlucHV0IiwiZXZ0IiwiX2V2dCRkYXRhVHJhbnNmZXIiLCJpbnB1dFR5cGUiLCJyYW5nZXMiLCJnZXRUYXJnZXRSYW5nZXMiLCJuZXdUZXh0IiwiZGF0YVRyYW5zZmVyIiwiZ2V0RGF0YSIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwiY20iLCJyZXBsYWNlUmFuZ2UiLCJDb2RlTWlycm9yIiwiZGVmaW5lT3B0aW9uIiwiZW5hYmxlZCIsIm9sZEVuYWJsZWQiLCJJbml0IiwiX3NwZWFrQW5kU3BlbGxTdGF0ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJiZWZvcmVJbnB1dEhhbmRsZXIiLCJjbGVhclNwZWFrQW5kU3BlbGxTdGF0ZSIsImRpc3BsYXkiLCJpbnB1dCIsImRpdiIsImhhbmRsZXIiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0dXBTcGVha0FuZFNwZWxsU3Rh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
